# FRIDA SPI Register Map (180 bits)
#
# Based on:
#   - /home/kcaisley/libs/obelix1-daq/obelix1/system/registers.yaml
#   - /home/kcaisley/frida/hdl/frida_core.v (authoritative bit mapping)
#
# The FRIDA chip has a 180-bit shift register for configuration.
# Bits are shifted in LSB-first (bit 0 first), with bit 179 at the MSB.
#
# Register layout (from frida_core.v):
#   [179:176] MUX_SEL (4 bits) - Selects which ADC output goes to COMP_OUT
#   [175:64]  Per-ADC controls (7 bits x 16 ADCs = 112 bits)
#   [63:0]    Shared DAC states (64 bits)
#
# Per-ADC control bits (7 bits each, ADC i at BASE = 64 + i*7):
#   BASE+0: EN_INIT      - Enable initialization phase
#   BASE+1: EN_SAMP_P    - Enable positive sampling
#   BASE+2: EN_SAMP_N    - Enable negative sampling
#   BASE+3: EN_COMP      - Enable comparator
#   BASE+4: EN_UPDATE    - Enable DAC update
#   BASE+5: DAC_MODE     - DAC operation mode
#   BASE+6: DAC_DIFFCAPS - DAC differential capacitor mode

# Global registers (directly addressable)
MUX_SEL:
  offset: 176
  size: 4
  default: 0
  description: "ADC output multiplexer select (0-15)"

# Shared DAC initial states (applied to all ADCs)
DAC_ASTATE_P:
  offset: 48
  size: 16
  default: 0x0000
  description: "Shared DAC A-state positive (16 bits)"

DAC_BSTATE_P:
  offset: 32
  size: 16
  default: 0x0000
  description: "Shared DAC B-state positive (16 bits)"

DAC_ASTATE_N:
  offset: 16
  size: 16
  default: 0x0000
  description: "Shared DAC A-state negative (16 bits)"

DAC_BSTATE_N:
  offset: 0
  size: 16
  default: 0x0000
  description: "Shared DAC B-state negative (16 bits)"

# Per-ADC configuration (16 ADCs, 7 bits each)
# ADC 0 is at offset 64, ADC 15 is at offset 64 + 15*7 = 169

ADC_0:
  offset: 64
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_1:
  offset: 71
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_2:
  offset: 78
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_3:
  offset: 85
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_4:
  offset: 92
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_5:
  offset: 99
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_6:
  offset: 106
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_7:
  offset: 113
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_8:
  offset: 120
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_9:
  offset: 127
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_10:
  offset: 134
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_11:
  offset: 141
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_12:
  offset: 148
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_13:
  offset: 155
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_14:
  offset: 162
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}

ADC_15:
  offset: 169
  size: 7
  default: 0x00
  fields:
    EN_INIT: {bit: 0, default: 0}
    EN_SAMP_P: {bit: 1, default: 0}
    EN_SAMP_N: {bit: 2, default: 0}
    EN_COMP: {bit: 3, default: 0}
    EN_UPDATE: {bit: 4, default: 0}
    DAC_MODE: {bit: 5, default: 0}
    DAC_DIFFCAPS: {bit: 6, default: 0}
