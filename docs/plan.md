evaluate the feasibility of combining two makefiles into one in the project root, and then adding even more functionality to it.

the makefile would need to:

- `make specs`: converting design specs to design parameters (mostly python)
- `make layout`: generate layouts for a block, given the design parameters, using klayout
- `make netlist`: generate spice netlists for specific blocks, given params, using spicelib
- `make spicesim`: run a spice level simulation of a generated netlist, using ngspice and associated spice testbenches. creates .raw files as output, for later analysis.
- `make digsim`: run a digital testbench on an associated digital design, using iverilog. generate a .vcd file as output.
- `make bevsim`: run a python based simulation of the sar adc, generating .raw files in the same format as the spice simulation
- `make synth`: generate technology mapped spice netlists, from verilog input files, and parameters from the design parameters file. yosys is used for synthesis, and abc is used to map to the chosen pdk library.
- `make flow`: use synthesized gate level verilog to gds using openroad flow scripts. here's the example openroad makefile: https://raw.githubusercontent.com/The-OpenROAD-Project/OpenROAD-flow-scripts/refs/heads/master/flow/Makefile
- `make analyze`: read in .raw files produced by simulations (spice or behavioral), and create plots and other analysis information about the performance of the design.
- `make docs`: many of the images above are included by markdown files, and this step would then update any other content of these markdown files which is for example generated by the make analyze step
- `make pdf`: finally this step would generate a pdf report from the docs, which use pandoc to convert to latex, and then pdflatex to compile. there would be an intermediate step where pdf files from multiple markdown files would be combined into the final output. meaning the lower level latex files would be instantiated in a top level latex file, and this top level would be the .tex file which is actually compiled. the conversion from .md to .tex would use some special .lua files for the table formatting, and to for example convert all .svg included images to the .pdf version being imported instead for better looking pdf support.

plan this out! and consider the makefiles at hdl/makefile and docs/tex/makefile and the one from the openroad project linked above to then propose a way to implement this all from a make-based flow which could be used from the top level directory. also take a stab at proposing a directory structure to support this pipeline, such that filetypes of the same kind, and for the same purpose are stored in the same directory without any extra files, so that it's easy to see what parts of the pipeline have been finished so far. and also so that some form of make clean can target cleaning only specific parts of the pipeline.

and lastly, and most importantly: think harder about this! put your thoughts in a plan.md file, and don't forget to consult the readme.md for any context of the project if needed.


**Structure inspired by OpenROAD Makefile:**
```makefile
# Configuration via config.mk
include config/config.mk

# Hierarchical includes
include makefiles/specs.mk
include makefiles/layout.mk
include makefiles/simulation.mk
# ... etc
```


# proposed directory structure:
```
frida/
├── Makefile                    # Unified root makefile
├── config/
│   ├── config.mk              # Main design parameters
│   ├── tsmc28.mk              # PDK-specific configs
│   ├── tsmc65.mk
│   └── nopdk.mk
├── makefiles/                 # Modular makefile includes
│   ├── specs.mk
│   ├── layout.mk
│   ├── simulation.mk
│   ├── synthesis.mk
│   ├── analysis.mk
│   └── docs.mk
├── specs/                     # Design specifications
│   ├── parameters.yaml
│   ├── constraints.yaml
│   └── generated/            # Generated design params
├── layout/                    # Layout generation
│   ├── scripts/              # KLayout generation scripts
│   ├── generated/            # Generated .gds files
│   └── extracted/            # Extracted netlists
├── netlist/                   # SPICE netlists
│   ├── templates/            # Netlist templates
│   ├── generated/            # Generated netlists
│   └── testbenches/          # SPICE testbenches
├── simulation/               # Simulation outputs
│   ├── spice/                # SPICE .raw files
│   ├── digital/              # Verilog .vcd files
│   └── behavioral/           # Python behavioral .raw
├── synthesis/                # Synthesis outputs
│   ├── netlist/              # Gate-level netlists
│   ├── constraints/          # Timing constraints
│   └── reports/              # Synthesis reports
├── physical/                 # Physical design (OpenROAD)
│   ├── results/              # Final GDS/timing
│   ├── reports/              # PnR reports
│   └── logs/                 # Detailed logs
├── analysis/                 # Analysis results
│   ├── plots/                # Generated plots (.svg/.pdf)
│   ├── data/                 # Processed data
│   └── reports/              # Analysis reports
├── docs/                     # Documentation (kept mostly as-is)
│   ├── generated/            # Auto-generated content
│   ├── templates/            # Markdown templates
│   └── final/                # Combined reports
├── src/                      # Source code (unchanged)
├── hdl/                      # HDL source (unchanged)
└── tech/                     # PDK files (unchanged)
```


# `make specs`
Purpose: Convert design specifications to design parameters
Implementation:
```makefile
specs: specs/generated/design_params.yaml

specs/generated/design_params.yaml: specs/parameters.yaml src/param_generator.py
	@mkdir -p specs/generated
	cd src && python param_generator.py ../specs/parameters.yaml ../specs/generated/design_params.yaml
```

# `make layout`
Purpose: Generate layouts using KLayout
Implementation:
```makefile
layout: layout/generated/$(TOP_BLOCK).gds

layout/generated/$(TOP_BLOCK).gds: specs/generated/design_params.yaml src/cdac_layout.py
	@mkdir -p layout/generated
	cd src && python cdac_layout.py ../specs/generated/design_params.yaml ../layout/generated/$(TOP_BLOCK).gds
```

# `make netlist`
Purpose: Generate SPICE netlists using spicelib
Implementation:
```makefile
netlist: netlist/generated/$(TOP_BLOCK).sp

netlist/generated/$(TOP_BLOCK).sp: specs/generated/design_params.yaml src/netlist_gen.py
	@mkdir -p netlist/generated
	cd src && python netlist_gen.py ../specs/generated/design_params.yaml ../netlist/generated/$(TOP_BLOCK).sp
```

# `make spicesim`
Purpose: Run SPICE simulations using ngspice
Implementation:
```makefile
spicesim: simulation/spice/$(TOP_BLOCK).raw

simulation/spice/$(TOP_BLOCK).raw: netlist/generated/$(TOP_BLOCK).sp netlist/testbenches/$(TOP_BLOCK)_tb.sp
	@mkdir -p simulation/spice
	cd simulation/spice && ngspice -b ../../netlist/testbenches/$(TOP_BLOCK)_tb.sp
```

# `make digsim`
Purpose: Run digital testbenches using iverilog
Implementation: (Enhanced version of existing hdl/Makefile)
```makefile
digsim: simulation/digital/$(TOP_BLOCK).vcd

simulation/digital/$(TOP_BLOCK).vcd: hdl/$(TOP_BLOCK).v hdl/$(TOP_BLOCK)_tb.v
	@mkdir -p simulation/digital
	cd hdl && iverilog -o ../simulation/digital/$(TOP_BLOCK)_sim $(TOP_BLOCK).v $(TOP_BLOCK)_tb.v
	cd simulation/digital && ./$(TOP_BLOCK)_sim
```

# `make bevsim`
Purpose: Run Python behavioral simulations
Implementation:
```makefile
bevsim: simulation/behavioral/$(TOP_BLOCK).raw

simulation/behavioral/$(TOP_BLOCK).raw: specs/generated/design_params.yaml src/behavioral.py
	@mkdir -p simulation/behavioral
	cd src && python behavioral.py ../specs/generated/design_params.yaml ../simulation/behavioral/$(TOP_BLOCK).raw
```

# `make synth`
Purpose: Technology mapping using yosys/abc
Implementation: (Enhanced version of existing hdl/Makefile)
```makefile
synth: synthesis/netlist/$(TOP_BLOCK)_synth.v

synthesis/netlist/$(TOP_BLOCK)_synth.v: hdl/$(TOP_BLOCK).v tech/$(PDK)/synth.ys
	@mkdir -p synthesis/netlist synthesis/reports
	cd synthesis && yosys -s ../tech/$(PDK)/synth.ys
```

# `make flow`
Purpose: OpenROAD flow integration
Implementation:
```makefile
flow: physical/results/$(TOP_BLOCK).gds

physical/results/$(TOP_BLOCK).gds: synthesis/netlist/$(TOP_BLOCK)_synth.v
	@mkdir -p physical/results physical/reports physical/logs
	# Integration with OpenROAD-flow-scripts
	cd physical && make -f $(OPENROAD_FLOW)/flow/Makefile DESIGN_CONFIG=../config/openroad_config.mk
```

# `make analyze`
Purpose: Analysis and plotting from .raw files
Implementation:
```makefile
analyze: analysis/plots/performance_summary.pdf

analysis/plots/performance_summary.pdf: simulation/spice/$(TOP_BLOCK).raw src/spice.py
	@mkdir -p analysis/plots analysis/data
	cd src && python spice.py ../simulation/spice/$(TOP_BLOCK).raw
```

# `make docs`
Purpose: Generate documentation with embedded analysis
Implementation:
```makefile
docs: docs/generated/complete_report.md

docs/generated/complete_report.md: analysis/plots/*.svg docs/templates/report_template.md
	@mkdir -p docs/generated
	# Template processing to embed analysis results
	python scripts/generate_docs.py docs/templates/report_template.md docs/generated/complete_report.md
```

# `make pdf`
Purpose: Generate final PDF report
Implementation: (Enhanced version of existing docs/tex/Makefile)
```makefile
pdf: docs/final/complete_report.pdf

docs/final/complete_report.pdf: docs/generated/complete_report.md docs/tex/simple_table.lua
	@mkdir -p docs/final
	cd docs && pandoc generated/complete_report.md -t latex --lua-filter=tex/simple_table.lua -o final/complete_report.tex
	cd docs/final && pdflatex complete_report.tex
```